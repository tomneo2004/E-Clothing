{"ast":null,"code":"import _defineProperty from \"/Volumes/BOOTCAMP/ReactProjects/e-clothing/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { takeLatest, all, call, put } from 'redux-saga/effects';\nimport UserActionTypes from './user.action.type';\nimport { Auth, googleProvider, CreateUserProfile } from '../../firebase/firebase.utils';\nimport { GoogleSignInSuccess, GoogleSignInFail } from './user.actions';\nexport function* signinWithGoogle() {\n  try {\n    const _ref = yield Auth.signInWithPopup(googleProvider),\n          user = _ref.user;\n\n    const userRef = yield call(CreateUserProfile, user);\n    const userSnapshot = yield userRef.get();\n    yield put(GoogleSignInSuccess(_objectSpread({\n      id: userSnapshot.id\n    }, userSnapshot.data())));\n  } catch (error) {\n    yield put(GoogleSignInFail(error));\n  }\n}\nexport function* googleSigninStart() {\n  yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START, signinWithGoogle);\n}\nexport function* userSaga() {\n  yield all([call(googleSigninStart)]);\n}","map":{"version":3,"sources":["/Volumes/BOOTCAMP/ReactProjects/e-clothing/src/Redux/user/user.saga.js"],"names":["takeLatest","all","call","put","UserActionTypes","Auth","googleProvider","CreateUserProfile","GoogleSignInSuccess","GoogleSignInFail","signinWithGoogle","signInWithPopup","user","userRef","userSnapshot","get","id","data","error","googleSigninStart","GOOGLE_SIGN_IN_START","userSaga"],"mappings":";;;;;;AAAA,SAAQA,UAAR,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+BC,GAA/B,QAAyC,oBAAzC;AACA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,SAAQC,IAAR,EAAcC,cAAd,EAA8BC,iBAA9B,QAAsD,+BAAtD;AACA,SAAQC,mBAAR,EAA6BC,gBAA7B,QAAoD,gBAApD;AAEA,OAAO,UAAUC,gBAAV,GAA4B;AAE/B,MAAG;AAAA,iBACgB,MAAML,IAAI,CAACM,eAAL,CAAqBL,cAArB,CADtB;AAAA,UACQM,IADR,QACQA,IADR;;AAEC,UAAMC,OAAO,GAAG,MAAMX,IAAI,CAACK,iBAAD,EAAoBK,IAApB,CAA1B;AACA,UAAME,YAAY,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA3B;AAEA,UAAMZ,GAAG,CAACK,mBAAmB;AACzBQ,MAAAA,EAAE,EAACF,YAAY,CAACE;AADS,OAErBF,YAAY,CAACG,IAAb,EAFqB,EAApB,CAAT;AAGH,GARD,CASA,OAAMC,KAAN,EAAY;AACR,UAAMf,GAAG,CAACM,gBAAgB,CAACS,KAAD,CAAjB,CAAT;AACH;AACJ;AAED,OAAO,UAAUC,iBAAV,GAA6B;AAChC,QAAMnB,UAAU,CAACI,eAAe,CAACgB,oBAAjB,EACXV,gBADW,CAAhB;AAEH;AAED,OAAO,UAAUW,QAAV,GAAoB;AACvB,QAAMpB,GAAG,CAAC,CAACC,IAAI,CAACiB,iBAAD,CAAL,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest, all, call, put} from 'redux-saga/effects';\nimport UserActionTypes from './user.action.type';\nimport {Auth, googleProvider, CreateUserProfile} from '../../firebase/firebase.utils';\nimport {GoogleSignInSuccess, GoogleSignInFail} from './user.actions';\n\nexport function* signinWithGoogle(){\n\n    try{\n        const {user} = yield Auth.signInWithPopup(googleProvider);\n        const userRef = yield call(CreateUserProfile, user);\n        const userSnapshot = yield userRef.get();\n\n        yield put(GoogleSignInSuccess({\n            id:userSnapshot.id,\n             ...userSnapshot.data()}));\n    }\n    catch(error){\n        yield put(GoogleSignInFail(error));\n    }\n}\n\nexport function* googleSigninStart(){\n    yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START,\n         signinWithGoogle);\n}\n\nexport function* userSaga(){\n    yield all([call(googleSigninStart)]);\n}"]},"metadata":{},"sourceType":"module"}